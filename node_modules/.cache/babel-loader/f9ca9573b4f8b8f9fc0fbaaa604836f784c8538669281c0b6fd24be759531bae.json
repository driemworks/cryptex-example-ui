{"ast":null,"code":"import { xglobal } from '@polkadot/x-global';\nimport { formatDate } from './format/formatDate.js';\nimport { isBn } from './is/bn.js';\nimport { isBuffer } from './is/buffer.js';\nimport { isFunction } from './is/function.js';\nimport { isObject } from './is/object.js';\nimport { isU8a } from './is/u8a.js';\nimport { u8aToHex } from './u8a/toHex.js';\nimport { u8aToU8a } from './u8a/toU8a.js';\nimport { hasProcess } from './has.js';\nconst logTo = {\n  debug: 'log',\n  error: 'error',\n  log: 'log',\n  warn: 'warn'\n};\nfunction formatOther(value) {\n  if (value && isObject(value) && value.constructor === Object) {\n    const result = {};\n    for (const [k, v] of Object.entries(value)) {\n      result[k] = loggerFormat(v);\n    }\n    return result;\n  }\n  return value;\n}\nexport function loggerFormat(value) {\n  if (Array.isArray(value)) {\n    return value.map(loggerFormat);\n  } else if (isBn(value)) {\n    return value.toString();\n  } else if (isU8a(value) || isBuffer(value)) {\n    return u8aToHex(u8aToU8a(value));\n  }\n  return formatOther(value);\n}\nfunction formatWithLength(maxLength) {\n  return v => {\n    if (maxLength <= 0) {\n      return v;\n    }\n    const r = `${v}`;\n    return r.length < maxLength ? v : `${r.substring(0, maxLength)} ...`;\n  };\n}\nfunction apply(log, type, values) {\n  let maxSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -1;\n  if (values.length === 1 && isFunction(values[0])) {\n    const fnResult = values[0]();\n    return apply(log, type, Array.isArray(fnResult) ? fnResult : [fnResult], maxSize);\n  }\n  console[logTo[log]](formatDate(new Date()), type, ...values.map(loggerFormat).map(formatWithLength(maxSize)));\n}\nfunction noop() {\n  // noop\n}\nfunction isDebugOn(e, type) {\n  return !!e && (e === '*' || type === e || e.endsWith('*') && type.startsWith(e.slice(0, -1)));\n}\nfunction isDebugOff(e, type) {\n  return !!e && e.startsWith('-') && (type === e.slice(1) || e.endsWith('*') && type.startsWith(e.slice(1, -1)));\n}\nfunction getDebugFlag(env, type) {\n  let flag = false;\n  for (const e of env) {\n    if (isDebugOn(e, type)) {\n      flag = true;\n    } else if (isDebugOff(e, type)) {\n      flag = false;\n    }\n  }\n  return flag;\n}\nfunction parseEnv(type) {\n  const env = (hasProcess ? xglobal.process : {}).env || {};\n  const maxSize = parseInt(env.DEBUG_MAX || '-1', 10);\n  return [getDebugFlag((env.DEBUG || '').toLowerCase().split(','), type), isNaN(maxSize) ? -1 : maxSize];\n}\n/**\n * @name Logger\n * @summary Creates a consistent log interface for messages\n * @description\n * Returns a `Logger` that has `.log`, `.error`, `.warn` and `.debug` (controlled with environment `DEBUG=typeA,typeB`) methods. Logging is done with a consistent prefix (type of logger, date) followed by the actual message using the underlying console.\n * @example\n * <BR>\n *\n * ```javascript\n * import { logger } from '@polkadot/util';\n *\n * const l = logger('test');\n * ```\n */\nexport function logger(_type) {\n  const type = `${_type.toUpperCase()}:`.padStart(16);\n  const [isDebug, maxSize] = parseEnv(_type.toLowerCase());\n  return {\n    debug: isDebug ? function () {\n      for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n        values[_key] = arguments[_key];\n      }\n      return apply('debug', type, values, maxSize);\n    } : noop,\n    error: function () {\n      for (var _len2 = arguments.length, values = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        values[_key2] = arguments[_key2];\n      }\n      return apply('error', type, values);\n    },\n    log: function () {\n      for (var _len3 = arguments.length, values = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        values[_key3] = arguments[_key3];\n      }\n      return apply('log', type, values);\n    },\n    noop,\n    warn: function () {\n      for (var _len4 = arguments.length, values = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        values[_key4] = arguments[_key4];\n      }\n      return apply('warn', type, values);\n    }\n  };\n}","map":{"version":3,"names":["xglobal","formatDate","isBn","isBuffer","isFunction","isObject","isU8a","u8aToHex","u8aToU8a","hasProcess","logTo","debug","error","log","warn","formatOther","value","constructor","Object","result","k","v","entries","loggerFormat","Array","isArray","map","toString","formatWithLength","maxLength","r","length","substring","apply","type","values","maxSize","arguments","undefined","fnResult","console","Date","noop","isDebugOn","e","endsWith","startsWith","slice","isDebugOff","getDebugFlag","env","flag","parseEnv","process","parseInt","DEBUG_MAX","DEBUG","toLowerCase","split","isNaN","logger","_type","toUpperCase","padStart","isDebug","_len","_key","_len2","_key2","_len3","_key3","_len4","_key4"],"sources":["/home/driemworks/cryptex/ui/node_modules/@polkadot/util/logger.js"],"sourcesContent":["import { xglobal } from '@polkadot/x-global';\nimport { formatDate } from './format/formatDate.js';\nimport { isBn } from './is/bn.js';\nimport { isBuffer } from './is/buffer.js';\nimport { isFunction } from './is/function.js';\nimport { isObject } from './is/object.js';\nimport { isU8a } from './is/u8a.js';\nimport { u8aToHex } from './u8a/toHex.js';\nimport { u8aToU8a } from './u8a/toU8a.js';\nimport { hasProcess } from './has.js';\nconst logTo = {\n    debug: 'log',\n    error: 'error',\n    log: 'log',\n    warn: 'warn'\n};\nfunction formatOther(value) {\n    if (value && isObject(value) && value.constructor === Object) {\n        const result = {};\n        for (const [k, v] of Object.entries(value)) {\n            result[k] = loggerFormat(v);\n        }\n        return result;\n    }\n    return value;\n}\nexport function loggerFormat(value) {\n    if (Array.isArray(value)) {\n        return value.map(loggerFormat);\n    }\n    else if (isBn(value)) {\n        return value.toString();\n    }\n    else if (isU8a(value) || isBuffer(value)) {\n        return u8aToHex(u8aToU8a(value));\n    }\n    return formatOther(value);\n}\nfunction formatWithLength(maxLength) {\n    return (v) => {\n        if (maxLength <= 0) {\n            return v;\n        }\n        const r = `${v}`;\n        return r.length < maxLength\n            ? v\n            : `${r.substring(0, maxLength)} ...`;\n    };\n}\nfunction apply(log, type, values, maxSize = -1) {\n    if (values.length === 1 && isFunction(values[0])) {\n        const fnResult = values[0]();\n        return apply(log, type, Array.isArray(fnResult) ? fnResult : [fnResult], maxSize);\n    }\n    console[logTo[log]](formatDate(new Date()), type, ...values\n        .map(loggerFormat)\n        .map(formatWithLength(maxSize)));\n}\nfunction noop() {\n    // noop\n}\nfunction isDebugOn(e, type) {\n    return !!e && (e === '*' ||\n        type === e ||\n        (e.endsWith('*') &&\n            type.startsWith(e.slice(0, -1))));\n}\nfunction isDebugOff(e, type) {\n    return !!e && (e.startsWith('-') &&\n        (type === e.slice(1) ||\n            (e.endsWith('*') &&\n                type.startsWith(e.slice(1, -1)))));\n}\nfunction getDebugFlag(env, type) {\n    let flag = false;\n    for (const e of env) {\n        if (isDebugOn(e, type)) {\n            flag = true;\n        }\n        else if (isDebugOff(e, type)) {\n            flag = false;\n        }\n    }\n    return flag;\n}\nfunction parseEnv(type) {\n    const env = (hasProcess ? xglobal.process : {}).env || {};\n    const maxSize = parseInt(env.DEBUG_MAX || '-1', 10);\n    return [\n        getDebugFlag((env.DEBUG || '').toLowerCase().split(','), type),\n        isNaN(maxSize)\n            ? -1\n            : maxSize\n    ];\n}\n/**\n * @name Logger\n * @summary Creates a consistent log interface for messages\n * @description\n * Returns a `Logger` that has `.log`, `.error`, `.warn` and `.debug` (controlled with environment `DEBUG=typeA,typeB`) methods. Logging is done with a consistent prefix (type of logger, date) followed by the actual message using the underlying console.\n * @example\n * <BR>\n *\n * ```javascript\n * import { logger } from '@polkadot/util';\n *\n * const l = logger('test');\n * ```\n */\nexport function logger(_type) {\n    const type = `${_type.toUpperCase()}:`.padStart(16);\n    const [isDebug, maxSize] = parseEnv(_type.toLowerCase());\n    return {\n        debug: isDebug\n            ? (...values) => apply('debug', type, values, maxSize)\n            : noop,\n        error: (...values) => apply('error', type, values),\n        log: (...values) => apply('log', type, values),\n        noop,\n        warn: (...values) => apply('warn', type, values)\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}