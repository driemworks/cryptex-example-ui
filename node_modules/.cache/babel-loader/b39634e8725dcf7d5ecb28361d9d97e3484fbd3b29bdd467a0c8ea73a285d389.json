{"ast":null,"code":"var _RpcCoder_id;\nimport { __classPrivateFieldGet, __classPrivateFieldSet } from \"tslib\";\nimport { isNumber, isString, isUndefined, stringify } from '@polkadot/util';\nimport RpcError from './error.js';\nfunction formatErrorData(data) {\n  if (isUndefined(data)) {\n    return '';\n  }\n  const formatted = `: ${isString(data) ? data.replace(/Error\\(\"/g, '').replace(/\\(\"/g, '(').replace(/\"\\)/g, ')').replace(/\\(/g, ', ').replace(/\\)/g, '') : stringify(data)}`;\n  // We need some sort of cut-off here since these can be very large and\n  // very nested, pick a number and trim the result display to it\n  return formatted.length <= 256 ? formatted : `${formatted.substring(0, 255)}…`;\n}\nfunction checkError(error) {\n  if (error) {\n    const {\n      code,\n      data,\n      message\n    } = error;\n    throw new RpcError(`${code}: ${message}${formatErrorData(data)}`, code, data);\n  }\n}\n/** @internal */\nexport class RpcCoder {\n  constructor() {\n    _RpcCoder_id.set(this, 0);\n  }\n  decodeResponse(response) {\n    if (!response || response.jsonrpc !== '2.0') {\n      throw new Error('Invalid jsonrpc field in decoded object');\n    }\n    const isSubscription = !isUndefined(response.params) && !isUndefined(response.method);\n    if (!isNumber(response.id) && (!isSubscription || !isNumber(response.params.subscription) && !isString(response.params.subscription))) {\n      throw new Error('Invalid id field in decoded object');\n    }\n    checkError(response.error);\n    if (response.result === undefined && !isSubscription) {\n      throw new Error('No result found in jsonrpc response');\n    }\n    if (isSubscription) {\n      checkError(response.params.error);\n      return response.params.result;\n    }\n    return response.result;\n  }\n  encodeJson(method, params) {\n    const [id, data] = this.encodeObject(method, params);\n    return [id, stringify(data)];\n  }\n  encodeObject(method, params) {\n    var _a;\n    const id = __classPrivateFieldSet(this, _RpcCoder_id, (_a = __classPrivateFieldGet(this, _RpcCoder_id, \"f\"), ++_a), \"f\");\n    return [id, {\n      id,\n      jsonrpc: '2.0',\n      method,\n      params\n    }];\n  }\n}\n_RpcCoder_id = new WeakMap();","map":{"version":3,"names":["_RpcCoder_id","__classPrivateFieldGet","__classPrivateFieldSet","isNumber","isString","isUndefined","stringify","RpcError","formatErrorData","data","formatted","replace","length","substring","checkError","error","code","message","RpcCoder","constructor","set","decodeResponse","response","jsonrpc","Error","isSubscription","params","method","id","subscription","result","undefined","encodeJson","encodeObject","_a","WeakMap"],"sources":["/home/driemworks/cryptex/ui/node_modules/@polkadot/rpc-provider/coder/index.js"],"sourcesContent":["var _RpcCoder_id;\nimport { __classPrivateFieldGet, __classPrivateFieldSet } from \"tslib\";\nimport { isNumber, isString, isUndefined, stringify } from '@polkadot/util';\nimport RpcError from './error.js';\nfunction formatErrorData(data) {\n    if (isUndefined(data)) {\n        return '';\n    }\n    const formatted = `: ${isString(data)\n        ? data.replace(/Error\\(\"/g, '').replace(/\\(\"/g, '(').replace(/\"\\)/g, ')').replace(/\\(/g, ', ').replace(/\\)/g, '')\n        : stringify(data)}`;\n    // We need some sort of cut-off here since these can be very large and\n    // very nested, pick a number and trim the result display to it\n    return formatted.length <= 256\n        ? formatted\n        : `${formatted.substring(0, 255)}…`;\n}\nfunction checkError(error) {\n    if (error) {\n        const { code, data, message } = error;\n        throw new RpcError(`${code}: ${message}${formatErrorData(data)}`, code, data);\n    }\n}\n/** @internal */\nexport class RpcCoder {\n    constructor() {\n        _RpcCoder_id.set(this, 0);\n    }\n    decodeResponse(response) {\n        if (!response || response.jsonrpc !== '2.0') {\n            throw new Error('Invalid jsonrpc field in decoded object');\n        }\n        const isSubscription = !isUndefined(response.params) && !isUndefined(response.method);\n        if (!isNumber(response.id) &&\n            (!isSubscription || (!isNumber(response.params.subscription) &&\n                !isString(response.params.subscription)))) {\n            throw new Error('Invalid id field in decoded object');\n        }\n        checkError(response.error);\n        if (response.result === undefined && !isSubscription) {\n            throw new Error('No result found in jsonrpc response');\n        }\n        if (isSubscription) {\n            checkError(response.params.error);\n            return response.params.result;\n        }\n        return response.result;\n    }\n    encodeJson(method, params) {\n        const [id, data] = this.encodeObject(method, params);\n        return [id, stringify(data)];\n    }\n    encodeObject(method, params) {\n        var _a;\n        const id = __classPrivateFieldSet(this, _RpcCoder_id, (_a = __classPrivateFieldGet(this, _RpcCoder_id, \"f\"), ++_a), \"f\");\n        return [id, {\n                id,\n                jsonrpc: '2.0',\n                method,\n                params\n            }];\n    }\n}\n_RpcCoder_id = new WeakMap();\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}